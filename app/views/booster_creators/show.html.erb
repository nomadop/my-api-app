<%= javascript_pack_tag 'booster_creators' %>

<div id="booster-creator">
  <p>
    <button class="btn btn-primary" @click="fetch_creatable" :disabled="fetching">{{fetching ? 'fetching' :
      'fetch'}}
    </button>
  </p>
  <table class="table">
    <tr>
      <th>appid</th>
      <th>name</th>
      <th>price</th>
      <th>ppg</th>
      <th>open ppg</th>
      <th>open cov</th>
      <th>open obr</th>
      <th>lc</th>
      <th>open lc</th>
      <th>order count</th>
      <th>proportion</th>
      <th>open order count</th>
      <th>open proportion</th>
      <th></th>
    </tr>
    <tr v-for="booster_creator in booster_creators">
      <td>{{booster_creator.appid}}</td>
      <td><a :href="booster_creator.listing_url">{{booster_creator.name}}</a></td>
      <td>{{booster_creator.price}}</td>
      <td>
        <color-text color_class="text-primary"
                    :content="booster_creator.price_per_goo"
                    :condition="content => content > base_ppg"/>
      </td>
      <td>
        <color-text color_class="text-primary"
                    :content="booster_creator.open_price_per_goo"
                    :condition="content => content > base_ppg"/>
      </td>
      <td>{{booster_creator.open_price.coefficient_of_variation}}</td>
      <td>
        <color-text color_class="text-danger"
                    :content="booster_creator.open_price.over_baseline_rate"
                    :condition="content => content < 0.5"/>
      </td>
      <td>
        <color-text color_class="text-primary"
                    :content="booster_creator.listing_booster_pack_count"
                    :condition="content => content === 0"/>
      </td>
      <td>
        <color-text color_class="text-danger"
                    :content="booster_creator.listing_trading_card_count"
                    :condition="content => content >= 5"/>
      </td>
      <td>{{booster_creator.sell_order_count}} / {{booster_creator.buy_order_count}}</td>
      <td>
        <color-text color_class="text-danger"
                    :content="booster_creator.sell_proportion"
                    :condition="content => content < 0.1"/>
      </td>
      <td>{{booster_creator.open_sell_order_count}} / {{booster_creator.open_buy_order_count}}</td>
      <td>
        <color-text color_class="text-danger"
                    :content="booster_creator.trading_card_prices_proportion"
                    :condition="content => content < 0.1"/>
      </td>
      <td>
        <span class="btn btn-primary" @click="create_and_sell(booster_creator)">create and sell</span>
      </td>
    </tr>
  </table>
</div>
